<ng-container *ngIf="weTrackTicket">
  <!-- THE INLINE STYLES ARE TEMPORARY. I WANT TO MAKE IT LOOK GOOD AND THEN I'LL STYLE APPROPRIATELY LATER -->
  <div class="container mb-3" style="border: 1px solid gray; padding: 0; border-radius: 5px; padding-bottom: 5px;">
    <div style="border-radius:5px; padding:5px; padding-top:0; overflow:hidden; cursor:pointer;" [ngStyle]="{'background-color': weTrackTicket.type === 'feature' ? 'lightblue' : weTrackTicket.type === 'issue' ? '#e8d7f0' : '#deffcd' }" (click)="onActivateTicketItem()">
      <div class="row">
        <div class="col-auto" style="overflow: hidden; white-space: nowrap; position:relative; top:-10px; left:-5px; border-radius: 5px; padding-top:10px; padding-left:20px;" [ngStyle]="{'background-color': weTrackTicket.type === 'feature' ? 'blue' : weTrackTicket.type === 'issue' ? 'purple' : 'green'}">
          <h5 style="color: white; margin-top:5px;">{{ weTrackTicket.title }}</h5>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <span [ngClass]="['dot', 'dot-' + statusColor]"></span> {{ weTrackTicket.status.charAt(0).toUpperCase() + weTrackTicket.status.slice(1) }}
        </div>
        <div class="col text-end">
          created: {{ prettyCreationDate }}
        </div>
      </div>
      <ng-container *ngIf="isActive">
        <div class="row">
          <div class="col">
            <span [ngStyle]="weTrackTicket.importance === 'urgent' ? {'font-weight' : 'bold'} : {}">{{ weTrackTicket.importance === 'low' ? '&darr;' : weTrackTicket.importance === 'medium' ? '~' : '&uarr;' }}</span> {{ weTrackTicket.importance.charAt(0).toUpperCase() + weTrackTicket.importance.slice(1) }}
          </div>
          <div class="col text-end">
            by: <b>{{ weTrackTicket.submitter }}</b>
          </div>
        </div>
        <div class="row">
          <div class="col">
            {{ weTrackTicket.type === 'feature' ? '&And; ' : weTrackTicket.type === 'issue' ? '&xotime; ' : '&odot; ' }}{{ weTrackTicket.type.charAt(0).toUpperCase() + weTrackTicket.type.slice(1) }}
          </div>
          <div class="col text-end">
            <span [ngStyle]="{'font-style' : weTrackTicket.assignee === '' ? 'italic' : '' }">{{ weTrackTicket.assignee === '' ? 'Unassigned' : 'for: ' }}</span><b>{{ weTrackTicket.assignee }}</b>
          </div>
        </div>
      </ng-container>
    </div>
    <div class="container mt-2">
      <ng-container *ngIf="isActive">
        <div class="row">
          <div class="col">
            <button class="btn btn-primary" (click)="onEditTicket()">Edit</button>
          </div>
          <div class="col text-end">
            <button class="btn btn-danger" (click)="onDeleteTicket()" disabled>Delete</button>
          </div>
        </div>
      </ng-container>
      <div class="row mt-2">
        <div class="col">
          <div [ngStyle]="!isActive ? ellipsesStyleWrap : {}">
            {{ weTrackTicket.description }} 
          </div>
        </div>
      </div>
      <div class="row mt-2">
        <div class="col">
          Comments ({{ weTrackTicket.comments ? weTrackTicket.comments.length : 0 }})
        </div>
      </div>
      <ng-container *ngIf="isActive">
        <hr>
        <ng-container *ngFor="let comment of weTrackTicket.comments; let i = index">
          <app-we-track-comment [comment]="comment" (deleteSelf)="deleteComment(i)"></app-we-track-comment>
        </ng-container>
        <div class="">
          <div class="row">
            <div class="col-md-2">
              <label for="name">Name:</label>
            </div>
            <div class="col-md-10">
              <label for="name">Comment:</label>
            </div>
          </div>
          <div class="row">
            <div class="col-md-2">
                <div class="form-group">
                  <input type="text" title="name" class="form-control" [(ngModel)]="commentName">
              </div>
            </div>
            <div class="col-md-8">
              <div class="form-group">
                <input type="text" title="comment" class="form-control" [(ngModel)]="commentText" (keyup.enter)="onSubmitComment()">
              </div>
            </div>
            <div class="col-md-2 text-end" style="padding-top: auto; padding-bottom: 0;">
              <div type="button" class="btn btn-primary" (click)="onSubmitComment()">Comment</div>
            </div>
          </div>
        </div>
      </ng-container>
    </div>
  </div>
</ng-container>